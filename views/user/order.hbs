
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>


<!-- Breadcrumbs -->
<div class="breadcrumbs">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="bread-inner">
					<ul class="bread-list">
						<li><a href="/">Home<i class="ti-arrow-right"></i></a></li>
						<li class="active"><a href="/checkout">Checkout</a></li>
					</ul>
					<div class="right" style="float: right;">
						<a href="/add-address" style="font-size: medium;">Add Address</a>
					</div>
				</div>
				
			</div>
			
		</div>
		
	</div>
</div>
<!-- End Breadcrumbs -->

{{!-- display address --}}

<section class="main">
	<div class="main-skills">
		{{#each user.address}}
		<div class="card">
			<i class="fas fa-laptop-code"></i>
			
			<p>{{this.address}}</p>

			<p>{{this.pincode}}</p>
			<a href="/apply-address/{{this.Id}}" class="btn  text-center" style="color: white;width:min-content;height:40px;margin:0 auto;">apply</a> 
			
		</div>
		{{/each}}


	</div>
</section>


{{!-- multiple address --}}
{{!-- <div class="form-address mt-2" style="display: flex; margin:0%"> --}}
{{!-- <div class="form-check" style="flex-direction: row;padding: 10px;">
  <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
  <label class="form-check-label" for="flexRadioDefault1">
    Default radio
  </label>
</div> --}}
{{!-- <div class="form-check" style="flex-direction: row;">
	{{#each user.address}}
 <div>
	<ul>
		<li><h5>{{user.address.country}}</h5></li>
		<li><h5>{{user.pincode}}</h5></li>
	</ul>
 </div>
 {{/each}}
</div> --}}
{{!-- address ends --}}

<!-- Start Checkout -->
<section class="shop checkout section">
	<div class="container">
		<div class="row">
			<div class="col-lg-12 col-12">
				<div class="checkout-form">
					<h2>Make Your Checkout Here</h2>
					<p>Please register in order to checkout more quickly</p>
					<!-- Form -->
					<form class="form" method="post" action="#" id="checkout-form1">
						<div class="row">
							<div class="col-lg-12 col-md-12 col-12">
								<div class="form-group">
									<label>First Name<span>*</span></label>
									<input type="text" name="name" placeholder="" value="{{user.firstname}}"
										required="required">
								</div>
							</div>
							<div class="col-lg-6 col-md-6 col-12">
								<div class="form-group">
									<label>Last Name<span>*</span></label>
									<input type="text" name="name" placeholder="" value="{{user.lastname}}"
										required="required">
								</div>
							</div>
							<div class="col-lg-6 col-md-6 col-12">
								<div class="form-group">
									<label>Email Address<span>*</span></label>
									<input type="email" name="email" value="{{user.email}}" placeholder=""
										required="required">
								</div>
							</div>
							<div class="col-lg-6 col-md-6 col-12">
								<div class="form-group">
									<label>Phone Number<span>*</span></label>
									<input type="number" name="number" value="{{user.phone}}" placeholder=""  required="required">
								</div>
							</div>
							<div class="col-lg-6 col-md-6 col-12">
								<div class="form-group">
									<label>State<span>*</span></label>
									<select name="country_name" id="country">
										<option value="Andhra Pradesh">Andhra Pradesh</option>
										<option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands
										</option>
										<option value="Arunachal Pradesh">Arunachal Pradesh</option>
										<option value="Assam">Assam</option>
										<option value="Bihar">Bihar</option>
										<option value="Chandigarh">Chandigarh</option>
										<option value="Chhattisgarh">Chhattisgarh</option>
										<option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
										<option value="Daman and Diu">Daman and Diu</option>
										<option value="Delhi">Delhi</option>
										<option value="Lakshadweep">Lakshadweep</option>
										<option value="Puducherry">Puducherry</option>
										<option value="Goa">Goa</option>
										<option value="Gujarat">Gujarat</option>
										<option value="Haryana">Haryana</option>
										<option value="Himachal Pradesh">Himachal Pradesh</option>
										<option value="Jammu and Kashmir">Jammu and Kashmir</option>
										<option value="Jharkhand">Jharkhand</option>
										<option value="Karnataka">Karnataka</option>
										<option value="Kerala">Kerala</option>
										<option value="Madhya Pradesh">Madhya Pradesh</option>
										<option value="Maharashtra">Maharashtra</option>
										<option value="Manipur">Manipur</option>
										<option value="Meghalaya">Meghalaya</option>
										<option value="Mizoram">Mizoram</option>
										<option value="Nagaland">Nagaland</option>
										<option value="Odisha">Odisha</option>
										<option value="Punjab">Punjab</option>
										<option value="Rajasthan">Rajasthan</option>
										<option value="Sikkim">Sikkim</option>
										<option value="Tamil Nadu">Tamil Nadu</option>
										<option value="Telangana">Telangana</option>
										<option value="Tripura">Tripura</option>
										<option value="Uttar Pradesh">Uttar Pradesh</option>
										<option value="Uttarakhand">Uttarakhand</option>
										<option value="West Bengal">West Bengal</option>
									</select>



								</div>
							</div>
							
							
							<div class="col-lg-6 col-md-6 col-12">
								<div class="form-group">
									<label>Address Line 1<span>*</span></label>
									<input type="text" name="address" placeholder="" required="required" 
									{{#each user.address}}
									{{#if this.status}}
									value="{{this.address.[0]}}"
									{{/if}}
									{{/each}}>
							
								</div>
							</div>
							<div class="col-lg-6 col-md-6 col-12">
								<div class="form-group">
									<label>Address Line 2<span>*</span></label>
									<input type="text" name="address" placeholder="" required="required"
									{{#each user.address}} 
									{{#if this.status}}
									value="{{this.address.[1]}}
									{{/if}}"
									{{/each}}>
							
								</div>
							</div>
							
							<div class="col-lg-6 col-md-6 col-12">
								<div class="form-group">
									<label>Postal Code<span>*</span></label>
									<input type="text" name="post" placeholder="Enter pincode"  required="required" pattern="^[1-9]{1}[0-9]{2}{0,1}[0-9]{3}"
									{{#each user.address}}
									{{#if this.status}}
									value="{{this.pincode}}"
									{{/if}}
									{{/each}}>
								
								</div>
								
							</div>
							<div class="col-lg-6 col-md-6 col-12">
							<div class="form-group">
									
									<input type="text" name="userId" placeholder="" value="{{user._id}}" hidden>
								</div>
							</div>


						</div>
						<div class="row">
							<div class="col-lg-12 col-12">
								<div class="order-details">
									<!-- Order Widget -->
									<div class="single-widget">
										<h2>CART TOTALS</h2>
										<div class="content">
											<ul>
												<li> Total<span>Rs {{total}}</span></li>
												{{!-- <li>(+) Shipping<span>$10.00</span></li>
												<li class="last">Total<span>$340.00</span></li> --}}
											</ul>
										</div>
									</div>
									<!--/ End Order Widget -->
									<!-- Order Widget -->
									<div class="single-widget">
										<h2>Payments</h2>
										<div class="content">
											<div class="checkbox">
												{{!-- <label class="checkbox-inline" for="1"><input name="updates"
														id="1" type="checkbox">
													Check Payments</label> --}}
												<label class="checkbox-inline" for="2"><input name="payment-method" id="2"
														value="cash-on-delivery" type="checkbox">
													Cash On Delivery</label>
												<label class="checkbox-inline" for="3"><input name="payment-method" id="3"
														type="checkbox">
													PayPal</label>
											</div>
										</div>
									</div>
									<!--/ End Order Widget -->
									<!-- Payment Method Widget -->
									<div class="single-widget payement">
										<div class="content">
											<img src="/eshop/eshop/images/payment-method.png" alt="#">
										</div>
									</div>
									<!--/ End Payment Method Widget -->
									<!-- Button Widget -->
									<div class="single-widget get-button">
										<div class="content">
											<div class="button">
												<button class="btn" type="submit" onclick="console.log('
													order ajax works')">proceed to checkout</button>
											</div>
										</div>
									</div>
									<!--/ End Button Widget -->
								</div>
							</div>
						</div>
					</form>
					<!--/ End Form -->
				</div>
			</div>

		</div>
	</div>
</section>
<!--/ End Checkout -->



<script>
	$("#checkout-form1").submit((e) => {
		e.preventDefault()
		$.ajax({
			url: '/order',
			method: 'post',
			data: $('#checkout-form1').serialize(),
			success: (response) => {
				console.log('respones after placing order',response)
				if(response.paymentMethod=='cod')
				{
				
				alert("order has been placed succesfully")
				}
				if(response.status)
				{
					location.href='/checkout'
				}
				else{
					alert("to paypal interface")
					location.href='/pay'
				}
			},

		})
	})

	
</script>
</body>

</html>

<style>
	.main{
		position: relative;
		padding: 20px;
		width: 100%;
	}
	.main-top{
		display: flex;
		width: 100%;
	}
	.main-top i{
		position: absolute;
		right: 0;
		margin: 10px 30px;
		color: rgb(11, 109, 109);
		cursor: pointer;
	}
	.main-skills{
		display: flex;
		margin-top: 20px;
	}
	.main-skills .card{
		width: 25%;
		margin: 10px;
		background: #fff;
		text-align: center;
		border-radius: 20px;
		padding: 10px;
		box-shadow: 0 20px 35px rgba(0,0, 0, 0.1);
	}
	.main-skills .card button{

		background: #f7941d;
		color: #fff;
		padding: 7px 15px;
		border-radius: 10px;
		margin-top: 15px;
		cursor: pointer;

	}
	.main-skills .card button:hover{
		background: rgba(223, 70, 15, 0.856);
	}
	.main-skills .card{
		font-size: 16px;
		padding: 10px;
	}
</style>